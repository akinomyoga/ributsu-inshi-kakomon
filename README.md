# 東京大学大学院理学系研究科物理学専攻 院試過去問

このリポジトリでは院試過去問・解答例の TeX ソース (TeX ソースがあるもののみ) を保管しています。

## コンパイル方法

ディレクトリ `src/build/` 以下に pdf が生成されます。

```bash
$ cd src
$ make all
$ make extra
```

※正しくコンパイルするには `platex`, `dvipdfmx`, `jsclasses` やその他の TeX パッケージと日本語フォントをインストールして、正しく設定する必要があります。
特に日本語フォントに関しては文字化けしてても警告もエラーも表示されないことがあるので、正しくコンパイルできているかは実際にファイルを見て確認する必要があります。

### Fedora 35 の場合

自分の環境 (Fedora 35) でコンパイルする為に必要だった設定を記録に残しておきます。
以下では、日本語明朝・ゴシックとして IPA フォントを使う様に設定しました。

まず、必要なパッケージを入れます。
(以下は単に自分の環境で追加で入れる必要があったものなので、他にも必要な物はあるかもしれません。
適宜コンパイルエラーメッセージを見てインストールする必要があります。)

```
sudo dnf install texlive texlive-{platex,dvipdfmx,jsclasses,ascmac,comment} ipa-\*-fonts
```

IPA フォントを Ghostscript に登録し、Ryumin や GothicBBB の代わりに IPA フォントを使用する様に設定します。
(正しい設定方法が分からなかったので直接 distribution のパッケージのファイルを編集している。
本当は良くないので正しい設定方法を後で調べる必要がある。)


```diff
diff -bwu /usr/share/ghostscript/Resource/Init/cidfmap{.fc35-original,}
--- /usr/share/ghostscript/Resource/Init/cidfmap.fc35-original^I2022-03-08 18:03:21.435259617 +0900
+++ /usr/share/ghostscript/Resource/Init/cidfmap^I2022-03-08 18:03:44.829363136 +0900
@@ -45,3 +45,13 @@
 %
 %  Note the use of a string to cope with the name containing a space.
 %
+/IPAMincho << /FileType /TrueType /Path (/usr/share/fonts/ipa-mincho/ipam.ttf) /CSI [(Japan1) 6] >> ;
+/IPAGothic << /FileType /TrueType /Path (/usr/share/fonts/ipa-gothic/ipag.ttf) /CSI [(Japan1) 6] >> ;
+
+/Ryumin-Light /IPAMincho ;
+/Ryumin-Medium /IPAMincho ;
+/GothicBBB-Medium /IPAGothic ;
+/HeiseiKakuGo-W5 /IPAGothic ;
+/HeiseiMin-W3 /IPAMincho ;
+/MSGothic /IPAGothic ;
+/MSMincho /IPAMincho ;
```

`dvipdfmx` が失敗するので `dvipdfmx.cfg` を編集します。
(これも面倒なので直接パッケージのファイルを編集しているが本当は良くない。)

```diff
diff -bwu /usr/share/texlive/texmf-dist/dvipdfmx/dvipdfmx.cfg{.orig,}
--- /usr/share/texlive/texmf-dist/dvipdfmx/dvipdfmx.cfg.orig^I2022-03-08 18:16:11.270766802 +0900
+++ /usr/share/texlive/texmf-dist/dvipdfmx/dvipdfmx.cfg^I2022-03-08 18:16:24.653827910 +0900
@@ -216,7 +216,7 @@
 %f psfonts.map

 %% Put additional fontmap files here (usually for Type0 fonts)
-%f  cid-x.map
+f  cid-x.map

 % the following file is generated by updmap(-sys) from the
 % KanjiMap entries in the updmap.cfg file.
```
